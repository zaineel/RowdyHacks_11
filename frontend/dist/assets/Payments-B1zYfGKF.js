import{u as w,r as i,p as P,f as U,c as a,a as t,F as m,i as x,j as C,m as D,k as u,o,t as n,n as h}from"./index-D8A3FOEl.js";const R={key:0,class:"text-center py-12"},j={key:1},B={class:"card mb-8"},N={key:0,class:"text-center py-8 text-dusty-400"},S={key:1,class:"space-y-3"},H={class:"text-dusty-100 font-medium"},L={class:"text-sm text-dusty-400"},M={class:"text-right"},$={class:"text-2xl font-bold text-frontier-400"},E={class:"card"},F={class:"flex justify-between items-center mb-4"},I=["value"],V={key:0,class:"text-center py-8 text-dusty-400"},z={key:1,class:"space-y-2"},A={class:"flex items-center space-x-3"},T={class:"text-2xl"},q={class:"text-dusty-100"},G={class:"text-sm text-dusty-400"},J={class:"text-xs text-dusty-500"},K={class:"text-right"},O={class:"text-xs text-dusty-400"},Y={__name:"Payments",setup(Q){const{user:W}=w(),c=i(!0),r=i(null),y=i([]),p=i([]),d=i("all"),v=i([]),_=l=>new Date(l).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),b=async()=>{c.value=!0;try{const l=await u.auth.getCurrentUser();r.value=l.data.data.id;const s=await u.users.getCircles(r.value);v.value=s.data.data||[];const e=await u.payments.getUpcoming(r.value);y.value=e.data.data||[];const k=await u.payments.getByUser(r.value);p.value=(k.data.data||[]).map(g=>({...g,type:"payment",date:_(g.created_at)}))}catch(l){console.error("Error loading payment data:",l)}finally{c.value=!1}},f=P(()=>d.value==="all"?p.value:p.value.filter(l=>l.circle_id===parseInt(d.value)));return U(()=>{b()}),(l,s)=>(o(),a("div",null,[c.value?(o(),a("div",R,[...s[1]||(s[1]=[t("div",{class:"spinner mx-auto"},null,-1),t("p",{class:"text-dusty-300 mt-4"},"Loading payment data...",-1)])])):(o(),a("div",j,[s[6]||(s[6]=t("h1",{class:"text-3xl font-bold text-frontier-400 mb-2"},"Payments",-1)),s[7]||(s[7]=t("p",{class:"text-dusty-300 mb-8"},"Track your contributions and payouts",-1)),t("div",B,[s[3]||(s[3]=t("h2",{class:"text-2xl font-semibold mb-4 text-frontier-400"},"Upcoming Payments",-1)),y.value.length===0?(o(),a("div",N," No upcoming payments ")):(o(),a("div",S,[(o(!0),a(m,null,x(y.value,e=>(o(),a("div",{key:e.id,class:"flex items-center justify-between p-4 bg-dusty-700 rounded-lg"},[t("div",null,[t("p",H,n(e.circle_name),1),t("p",L,"Due: "+n(_(e.due_date)),1)]),t("div",M,[t("p",$,"$"+n(e.monthly_amount||e.amount),1),s[2]||(s[2]=t("button",{class:"btn-frontier mt-2 text-sm"},"Pay Now",-1))])]))),128))]))]),t("div",E,[t("div",F,[s[5]||(s[5]=t("h2",{class:"text-2xl font-semibold text-frontier-400"},"Payment History",-1)),C(t("select",{"onUpdate:modelValue":s[0]||(s[0]=e=>d.value=e),class:"input-field w-auto"},[s[4]||(s[4]=t("option",{value:"all"},"All Circles",-1)),(o(!0),a(m,null,x(v.value,e=>(o(),a("option",{key:e.id,value:e.id},n(e.name),9,I))),128))],512),[[D,d.value]])]),f.value.length===0?(o(),a("div",V," No payment history yet ")):(o(),a("div",z,[(o(!0),a(m,null,x(f.value,e=>(o(),a("div",{key:e.id,class:"flex items-center justify-between p-3 bg-dusty-700 rounded-lg"},[t("div",A,[t("span",T,n(e.type==="payout"?"ðŸ’°":"ðŸ’³"),1),t("div",null,[t("p",q,n(e.type==="payout"?"Received Payout":"Made Payment"),1),t("p",G,n(e.circle_name),1),t("p",J,"Cycle "+n(e.cycle_number),1)])]),t("div",K,[t("p",{class:h([e.type==="payout"?"text-green-400":"text-frontier-400","font-bold"])},n(e.type==="payout"?"+":"-")+"$"+n(e.amount),3),t("p",O,n(e.date),1),t("span",{class:h(`badge-${e.status==="completed"?"success":"warning"} text-xs`)},n(e.status),3)])]))),128))]))])]))]))}};export{Y as default};
