import{r as m,p as g,c as p,a as t,w as k,j as i,v as n,m as v,b,d as r,t as c,g as _,e as w,o as f,k as V}from"./index-D8A3FOEl.js";const S={class:"max-w-2xl mx-auto"},D={class:"card"},B={class:"mb-6"},C=["disabled"],I={class:"mb-6"},L=["disabled"],U={class:"grid md:grid-cols-2 gap-6 mb-6"},$=["disabled"],q=["disabled"],N={class:"grid md:grid-cols-2 gap-6 mb-6"},E={class:"relative"},M=["disabled"],T={class:"relative"},F=["disabled"],P={class:"mb-6"},H={class:"block text-sm font-medium mb-2"},O=["disabled"],R={class:"flex gap-3"},j=["disabled"],G=["disabled"],z={key:0,class:"spinner inline-block mr-2"},K={__name:"ListItem",setup(A){const y=w(),o=m(!1),s=m({title:"",description:"",category:"",condition:"",deposit_amount:null,daily_rate:0,min_credit_score:500}),u=g(()=>s.value.title&&s.value.category&&s.value.condition&&s.value.deposit_amount!==null&&s.value.deposit_amount>=0),x=async()=>{var a,e,l;if(!u.value){alert("Please fill in all required fields");return}o.value=!0;try{const d=await V.marketplace.create({title:s.value.title,description:s.value.description,category:s.value.category,condition:s.value.condition,deposit_amount:s.value.deposit_amount,daily_rate:s.value.daily_rate||0,min_credit_score:s.value.min_credit_score});alert("Item listed successfully! 🎉"),y.push(`/marketplace/${d.data.data.id}`)}catch(d){console.error("Error creating item:",d),alert(((l=(e=(a=d.response)==null?void 0:a.data)==null?void 0:e.error)==null?void 0:l.message)||"Failed to list item. Please try again.")}finally{o.value=!1}};return(a,e)=>(f(),p("div",S,[t("button",{onClick:e[0]||(e[0]=l=>a.$router.push("/marketplace")),class:"text-frontier-400 hover:text-frontier-300 mb-6"}," ← Back to Marketplace "),t("div",D,[e[24]||(e[24]=t("h1",{class:"text-3xl font-bold text-frontier-400 mb-2"},"List an Item",-1)),e[25]||(e[25]=t("p",{class:"text-dusty-300 mb-8"},"Share your items with the community and build credit!",-1)),t("form",{onSubmit:k(x,["prevent"])},[t("div",B,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium mb-2"},"Item Title *",-1)),i(t("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>s.value.title=l),type:"text",required:"",placeholder:"e.g., Power Drill, Gaming Console, Textbook",class:"input-field",disabled:o.value},null,8,C),[[n,s.value.title]])]),t("div",I,[e[10]||(e[10]=t("label",{class:"block text-sm font-medium mb-2"},"Description",-1)),i(t("textarea",{"onUpdate:modelValue":e[2]||(e[2]=l=>s.value.description=l),rows:"4",placeholder:"Describe the item, its features, and any special instructions...",class:"input-field resize-none",disabled:o.value},null,8,L),[[n,s.value.description]])]),t("div",U,[t("div",null,[e[12]||(e[12]=t("label",{class:"block text-sm font-medium mb-2"},"Category *",-1)),i(t("select",{"onUpdate:modelValue":e[3]||(e[3]=l=>s.value.category=l),required:"",class:"input-field",disabled:o.value},[...e[11]||(e[11]=[b('<option value="" disabled>Select category</option><option value="tools">🔧 Tools</option><option value="electronics">💻 Electronics</option><option value="books">📚 Books</option><option value="sports">⚽ Sports Equipment</option><option value="household">🏠 Household Items</option><option value="other">📦 Other</option>',7)])],8,$),[[v,s.value.category]])]),t("div",null,[e[14]||(e[14]=t("label",{class:"block text-sm font-medium mb-2"},"Condition *",-1)),i(t("select",{"onUpdate:modelValue":e[4]||(e[4]=l=>s.value.condition=l),required:"",class:"input-field",disabled:o.value},[...e[13]||(e[13]=[b('<option value="" disabled>Select condition</option><option value="new">New</option><option value="like_new">Like New</option><option value="good">Good</option><option value="fair">Fair</option>',5)])],8,q),[[v,s.value.condition]])])]),t("div",N,[t("div",null,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium mb-2"},[r(" Security Deposit * "),t("span",{class:"text-xs text-dusty-400"},"(Refundable)")],-1)),t("div",E,[e[15]||(e[15]=t("span",{class:"absolute left-3 top-1/2 -translate-y-1/2 text-dusty-400"},"$",-1)),i(t("input",{"onUpdate:modelValue":e[5]||(e[5]=l=>s.value.deposit_amount=l),type:"number",required:"",min:"0",step:"0.01",placeholder:"0.00",class:"input-field pl-8",disabled:o.value},null,8,M),[[n,s.value.deposit_amount,void 0,{number:!0}]])]),e[17]||(e[17]=t("p",{class:"text-xs text-dusty-400 mt-1"},"Protects your item if damaged or not returned",-1))]),t("div",null,[e[19]||(e[19]=t("label",{class:"block text-sm font-medium mb-2"},[r(" Daily Rental Fee "),t("span",{class:"text-xs text-dusty-400"},"(Optional)")],-1)),t("div",T,[e[18]||(e[18]=t("span",{class:"absolute left-3 top-1/2 -translate-y-1/2 text-dusty-400"},"$",-1)),i(t("input",{"onUpdate:modelValue":e[6]||(e[6]=l=>s.value.daily_rate=l),type:"number",min:"0",step:"0.01",placeholder:"0.00",class:"input-field pl-8",disabled:o.value},null,8,F),[[n,s.value.daily_rate,void 0,{number:!0}]])]),e[20]||(e[20]=t("p",{class:"text-xs text-dusty-400 mt-1"},"Leave at 0 for free lending",-1))])]),t("div",P,[t("label",H," Minimum Borrower Credit Score: "+c(s.value.min_credit_score),1),i(t("input",{"onUpdate:modelValue":e[7]||(e[7]=l=>s.value.min_credit_score=l),type:"range",min:"300",max:"850",step:"10",class:"w-full",disabled:o.value},null,8,O),[[n,s.value.min_credit_score,void 0,{number:!0}]]),e[21]||(e[21]=t("div",{class:"flex justify-between text-xs text-dusty-400 mt-1"},[t("span",null,"300 (Anyone)"),t("span",null,"500 (Default)"),t("span",null,"850 (Highest)")],-1)),e[22]||(e[22]=t("p",{class:"text-xs text-dusty-400 mt-2"}," Only users with this credit score or higher can borrow your item ",-1))]),e[23]||(e[23]=t("div",{class:"bg-frontier-500/10 border border-frontier-500/30 rounded-lg p-4 mb-6"},[t("p",{class:"text-sm text-dusty-100 font-medium mb-2"},"💡 Benefits of Lending"),t("ul",{class:"text-xs text-dusty-300 space-y-1"},[t("li",null,"• Earn +10 credit points for each successful lending"),t("li",null,"• Help your community members access items they need"),t("li",null,"• Deposit protects your item from damage"),t("li",null,"• Build your reputation in the marketplace")])],-1)),t("div",R,[t("button",{type:"button",onClick:e[8]||(e[8]=l=>a.$router.push("/marketplace")),class:"btn-frontier-outline flex-1",disabled:o.value}," Cancel ",8,j),t("button",{type:"submit",class:"btn-frontier flex-1",disabled:o.value||!u.value},[o.value?(f(),p("span",z)):_("",!0),r(" "+c(o.value?"Listing...":"List Item"),1)],8,G)])],32)])]))}};export{K as default};
