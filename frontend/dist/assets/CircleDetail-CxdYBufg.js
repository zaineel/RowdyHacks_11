import{u as pe,r as m,p as me,f as ye,q as ve,k as p,c as l,a as e,g as y,t as o,n as f,s as _e,d as N,F as k,i as P,j as E,v as U,o as n,x as xe}from"./index-D8A3FOEl.js";const be={key:0,class:"text-center py-12"},fe={key:1},ge={class:"flex justify-between items-start mb-8"},he={class:"text-3xl font-bold text-frontier-400 mb-2"},we={class:"text-dusty-300"},ke={class:"grid md:grid-cols-4 gap-6 mb-8"},Pe={class:"card"},Ce={class:"text-3xl font-bold text-frontier-400"},Me={class:"card"},De={class:"text-3xl font-bold text-starlight-400"},$e={class:"card"},Re={class:"text-3xl font-bold text-cosmic-400"},je={class:"card"},Ee={class:"text-lg font-bold text-green-400"},Ie={class:"card mb-8 bg-starlight-900/20 border-starlight-700"},Se={class:"flex justify-between items-center"},Ve={class:"text-2xl font-mono font-bold"},Ae={class:"card mb-8 bg-frontier-900/20 border-frontier-700"},Ne={class:"flex justify-between items-center"},Ue={class:"font-semibold text-frontier-400 mb-1"},Be={class:"text-3xl font-mono font-bold text-frontier-400"},Fe={key:0,class:"text-center"},Te={class:"card mb-8 bg-green-900/20 border-green-700"},Le={class:"font-semibold text-green-400 mb-4"},Ye={class:"mb-4"},ze={class:"flex justify-between items-center mb-2"},He={class:"text-2xl font-bold text-green-400"},We={class:"w-full bg-dusty-700 rounded-full h-4 overflow-hidden"},qe={class:"flex justify-between text-sm text-dusty-400 mt-2"},Ge={class:"mt-3 p-3 bg-dusty-800 rounded-lg"},Je={class:"flex justify-between items-center text-sm"},Ke={class:"text-dusty-300"},Oe={class:"text-green-400 font-semibold"},Qe={class:"text-yellow-400 font-semibold"},Xe={class:"text-dusty-400"},Ze={class:"mt-4 p-4 bg-dusty-800 rounded-lg"},et={class:"grid grid-cols-1 md:grid-cols-2 gap-2"},tt={class:"flex items-center space-x-2"},st={key:0,class:"flex justify-between items-center p-4 bg-dusty-700 rounded-lg"},ot={class:"text-lg font-bold text-green-400"},at={class:"text-xs text-dusty-500"},rt={key:0,class:"text-center"},lt={key:0,class:"card mb-8 bg-blue-900/20 border-blue-700"},nt={class:"space-y-3"},it={class:"flex items-center space-x-3"},dt={class:"text-blue-400 font-semibold"},ct={class:"text-dusty-300 text-sm"},ut={class:"text-dusty-500 text-xs"},pt={class:"text-right"},mt={class:"text-2xl font-bold text-green-400"},yt={class:"text-xs text-dusty-500"},vt={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 overflow-y-auto py-8"},_t={class:"bg-dusty-800 rounded-lg p-6 max-w-md w-full mx-4 my-auto"},xt={class:"mb-6"},bt={class:"text-sm text-dusty-400 mb-4"},ft={class:"text-2xl font-bold text-frontier-400"},gt={class:"space-y-3"},ht=["value"],wt={class:"flex items-center flex-1"},kt={class:"text-2xl mr-3"},Pt={class:"font-medium"},Ct={class:"text-xs text-dusty-400"},Mt={key:0,class:"mb-6 p-4 bg-dusty-700 rounded-lg border border-frontier-500/30"},Dt={class:"space-y-4"},$t={class:"grid grid-cols-2 gap-4"},Rt={class:"flex space-x-3"},jt=["disabled"],Et=["disabled"],It={key:0,class:"spinner inline-block mr-2"},St={class:"mb-6 border-b border-dusty-700"},Vt={class:"flex space-x-6"},At={key:2,class:"card"},Nt={class:"space-y-3"},Ut={class:"flex items-center space-x-3"},Bt={class:"w-10 h-10 bg-frontier-500 rounded-full flex items-center justify-center text-white font-bold"},Ft={class:"font-medium"},Tt={class:"text-sm text-dusty-400"},Lt={class:"flex items-center space-x-3"},Yt=["onClick","disabled"],zt={key:1,class:"text-xs px-3 py-1 rounded bg-frontier-500/20 text-frontier-400 border border-frontier-500"},Ht=["onClick","disabled"],Wt={key:3,class:"card"},qt={class:"space-y-2"},Gt={class:"flex items-center space-x-3"},Jt={class:"text-2xl"},Kt={class:"font-medium"},Ot={class:"text-sm text-dusty-400"},Qt={class:"text-right"},Xt={class:"font-bold text-frontier-400"},Zt={class:"text-xs text-dusty-400"},es={key:4,class:"card"},ts={key:0,class:"text-center py-8 text-dusty-400"},ss={key:1,class:"space-y-3"},os={class:"flex items-center space-x-4"},as={class:"w-12 h-12 bg-frontier-500 rounded-full flex items-center justify-center"},rs={class:"text-2xl"},ls={class:"font-medium"},ns={class:"text-sm text-dusty-400"},is={class:"text-xs text-dusty-500"},ds={class:"text-right"},cs={class:"text-2xl font-bold text-frontier-400"},us={class:"text-xs px-2 py-1 rounded bg-green-500/20 text-green-400 border border-green-500"},ps={key:5,class:"card"},ms={class:"flex items-center justify-between mb-4"},ys=["disabled"],vs={key:0},_s={key:1},xs={key:2},bs={key:3},fs={key:1,class:"text-xs text-gray-500 mt-2"},gs={key:0,class:"mb-6 p-4 bg-dusty-800 rounded-lg"},hs={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},ws={class:"text-center"},ks={class:"text-2xl font-bold text-green-400"},Ps={class:"text-center"},Cs={class:"text-2xl font-bold text-green-400"},Ms={class:"text-center"},Ds={class:"text-2xl font-bold text-blue-400"},$s={key:1,class:"text-center py-8 text-dusty-400"},Rs={key:2,class:"space-y-4"},js={class:"flex items-start justify-between mb-3"},Es={class:"flex items-center space-x-3"},Is={class:"font-semibold text-green-400 text-lg"},Ss={class:"text-sm text-dusty-300"},Vs={class:"text-right"},As={class:"text-3xl font-bold text-green-400"},Ns={class:"flex items-center space-x-2 mt-1"},Us={class:"text-xs px-2 py-1 rounded bg-green-500/20 text-green-400 border border-green-500"},Bs={class:"flex items-center justify-between text-sm text-dusty-400 pt-3 border-t border-dusty-700"},Fs={class:"flex items-center space-x-4"},Ts={class:"flex items-center space-x-1"},Ls={class:"flex items-center space-x-1"},Ys={class:"font-mono text-xs"},zs={class:"text-xs text-dusty-500"},Gs={__name:"CircleDetail",setup(Hs){const v=ve(),{user:Ws}=pe(),x=m("members"),B=m(!1),I=m(!1),S=m(!1),w=m(!1),F=m(!1),_=m(""),V=m(!1),C=m(null),$=m(!1),T=m(!1),d=m({number:"",name:"",expiry:"",cvv:""}),Q=[{value:"credit_card",label:"Credit Card",icon:"ðŸ’³",description:"Pay with your credit card"},{value:"debit_card",label:"Debit Card",icon:"ðŸ’³",description:"Pay with your debit card"},{value:"bank_account",label:"Bank Account",icon:"ðŸ¦",description:"Direct bank transfer"},{value:"digital_wallet",label:"Digital Wallet",icon:"ðŸ“±",description:"Apple Pay, Google Pay, etc."}],i=m({name:"",description:"",status:"pending",monthly_amount:0,current_members:0,max_members:0,current_cycle:1,next_payout_date:null,invite_code:""}),R=m([]),L=m([]),j=m(new Map),A=m([]),h=m([]),c=m({current_pool_amount:0,expected_pool_amount:0,pool_progress:0,members_paid:0,total_active_members:0,is_ready_for_payout:!1,next_recipient_name:"",next_recipient_id:null}),Y=m([]),z=me(()=>$.value),H=a=>new Date(a).toLocaleDateString("en-US",{month:"short",day:"numeric"}),W=a=>new Date(a).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),X=a=>({credit_card:"ðŸ’³",debit_card:"ðŸ’³",bank_account:"ðŸ¦",digital_wallet:"ðŸ“±",mock:"ðŸ’°"})[a]||"ðŸ’°",Z=a=>({credit_card:"Credit Card",debit_card:"Debit Card",bank_account:"Bank Account",digital_wallet:"Digital Wallet",mock:"Demo Payment"})[a]||"Payment",M=a=>{if(c.value.member_payments){const s=c.value.member_payments.find(r=>r.user_id===a.user_id);return{paid:(s==null?void 0:s.has_paid)||!1,paymentDate:s==null?void 0:s.payment_date}}const t=A.value.find(s=>s.user_id===a.user_id&&s.cycle_number===i.value.current_cycle&&s.status==="completed");return{paid:!!t,paymentDate:t==null?void 0:t.created_at}},ee=()=>{navigator.clipboard.writeText(i.value.invite_code),alert("Invite code copied to clipboard!")},te=async a=>{var t,s,r,u,b,g,K,O;if(confirm(`Vouch for ${a.name}? This will help them get approved to join the circle.`)){I.value=!0;try{await p.vouches.create({circle_id:v.params.id,vouchee_id:a.user_id,trust_level:5,notes:`Vouched for ${a.name}`}),j.value.set(a.user_id,!0),alert(`Successfully vouched for ${a.name}!`);const D=await p.circles.getMembers(v.params.id);R.value=D.data.data}catch(D){if(console.error("Error vouching for member:",D),((t=D.response)==null?void 0:t.status)===409||(b=(u=(r=(s=D.response)==null?void 0:s.data)==null?void 0:r.error)==null?void 0:u.message)!=null&&b.includes("already"))j.value.set(a.user_id,!0),alert(`You have already vouched for ${a.name}!`);else{const ue=((O=(K=(g=D.response)==null?void 0:g.data)==null?void 0:K.error)==null?void 0:O.message)||"Failed to vouch for member. Please try again.";alert(ue)}}finally{I.value=!1}}},se=async a=>{var t,s,r;if(confirm(`Approve ${a.name} to join the circle?`)){S.value=!0;try{await p.circles.approveMember(v.params.id,a.user_id),alert(`${a.name} has been approved and is now an active member!`);const u=await p.circles.getById(v.params.id);i.value=u.data.data;const b=await p.circles.getMembers(v.params.id);R.value=b.data.data;const g=await p.circles.getSchedule(v.params.id);L.value=g.data.data}catch(u){console.error("Error approving member:",u);const b=((r=(s=(t=u.response)==null?void 0:t.data)==null?void 0:s.error)==null?void 0:r.message)||"Failed to approve member. Please try again.";alert(b)}finally{S.value=!1}}},q=()=>{F.value=!1,_.value="",w.value=!1,d.value={number:"",name:"",expiry:"",cvv:""}},oe=a=>{let s=a.target.value.replace(/\s/g,"").replace(/(\d{4})/g,"$1 ").trim();d.value.number=s},ae=a=>{let t=a.target.value.replace(/\D/g,"");t.length>=2&&(t=t.slice(0,2)+"/"+t.slice(2,4)),d.value.expiry=t},re=a=>{let t=a.target.value.replace(/\D/g,"");d.value.cvv=t},le=()=>{if(!d.value.number||d.value.number.replace(/\s/g,"").length<13)return"Please enter a valid card number";if(!d.value.name||d.value.name.trim().length<3)return"Please enter the cardholder name";if(!d.value.expiry||!/^\d{2}\/\d{2}$/.test(d.value.expiry))return"Please enter a valid expiry date (MM/YY)";if(!d.value.cvv||d.value.cvv.length<3)return"Please enter a valid CVV";const[a,t]=d.value.expiry.split("/");return new Date(2e3+parseInt(t),parseInt(a)-1)<new Date?"Card has expired":null},ne=async()=>{var a,t,s;if(!_.value){alert("Please select a payment method");return}if(_.value==="credit_card"||_.value==="debit_card"){const r=le();if(r){alert(r);return}}w.value=!0;try{const r={circle_id:v.params.id,amount:i.value.monthly_amount,payment_method:_.value};(_.value==="credit_card"||_.value==="debit_card")&&(r.card_details={number:d.value.number.replace(/\s/g,""),name:d.value.name,expiry:d.value.expiry,cvv:d.value.cvv}),await p.payments.make(r),alert(`Payment of $${i.value.monthly_amount} successful! ðŸŽ‰`),q(),T.value=!0,await G();try{const u=await p.circles.getPoolStatus(v.params.id);c.value=u.data.data}catch(u){console.error("Error reloading pool status:",u)}}catch(r){console.error("Error making payment:",r);const u=((s=(t=(a=r.response)==null?void 0:a.data)==null?void 0:t.error)==null?void 0:s.message)||"Failed to process payment. Please try again.";alert(u),w.value=!1}},G=async()=>{try{const a=v.params.id,t=await p.payments.getByCircle(a);A.value=t.data.data.sort((s,r)=>new Date(r.created_at)-new Date(s.created_at))}catch(a){console.error("Error loading payments:",a)}},ie=async()=>{try{const a=v.params.id,r=(await p.payments.getByCircle(a)).data.data.find(u=>u.user_id===C.value&&u.cycle_number===i.value.current_cycle&&u.status==="completed");T.value=!!r}catch(a){console.error("Error checking payment status:",a)}},de=async()=>{try{const a=v.params.id,t=await p.payouts.getByCircle(a);h.value=t.data.data}catch(a){console.error("Error loading payouts:",a)}},J=async()=>{try{const a=v.params.id,t=await p.circles.getPoolStatus(a);c.value=t.data.data}catch(a){console.error("Error loading pool status:",a)}},ce=async()=>{var t,s,r,u;if(!c.value.next_recipient_id){alert("No recipient set for the next payout. Please set the next payout recipient first.");return}const a=c.value.is_ready_for_payout?"Release payout to the next recipient? This will process the payout immediately.":"Pool is not full yet, but release payout anyway for demo purposes?";if(confirm(a)){V.value=!0;try{const b=v.params.id,g=await p.payouts.process({circle_id:b,payout_type:"manual"});g.data.success?(alert(`Payout released successfully! ${g.data.data.recipient_name} received $${g.data.data.amount}`),await loadCircleData(),await de(),await J()):alert("Failed to release payout: "+(((t=g.data.error)==null?void 0:t.message)||"Unknown error"))}catch(b){console.error("Error releasing payout:",b),alert("Error releasing payout: "+(((u=(r=(s=b.response)==null?void 0:s.data)==null?void 0:r.error)==null?void 0:u.message)||b.message))}finally{V.value=!1}}};return ye(async()=>{const a=v.params.id;B.value=!0;try{const t=await p.auth.getCurrentUser();C.value=t.data.data.id;const s=await p.circles.getById(a);i.value=s.data.data,$.value=i.value.admin_id===C.value,await J(),console.log("Circle Admin ID:",i.value.admin_id),console.log("Current User ID:",C.value),console.log("Is Admin:",$.value),console.log("Pool Status:",c.value);try{const r=await p.circles.getMembers(a);R.value=r.data.data}catch(r){console.error("Error loading members:",r)}try{const r=await p.circles.getSchedule(a);L.value=r.data.data}catch(r){console.error("Error loading schedule:",r)}try{(await p.vouches.getMyVouches(a)).data.data.forEach(u=>{j.value.set(u.vouchee_id,!0)})}catch(r){console.error("Error loading vouches:",r)}try{await G()}catch(r){console.error("Error loading payments:",r)}try{const r=await p.circles.getPoolStatus(a);c.value=r.data.data}catch(r){console.error("Error loading pool status:",r)}try{const r=await p.circles.getPayoutNotifications();Y.value=r.data.data}catch(r){console.error("Error loading payout notifications:",r)}try{const r=await p.payouts.getByCircle(a);h.value=r.data.data}catch(r){console.error("Error loading payouts:",r)}try{await ie()}catch(r){console.error("Error checking payment status:",r)}}catch(t){console.error("Error loading circle:",t),alert("Failed to load circle details. Please try again.")}finally{B.value=!1}}),(a,t)=>(n(),l("div",null,[B.value?(n(),l("div",be,[...t[10]||(t[10]=[e("div",{class:"spinner mx-auto"},null,-1),e("p",{class:"text-dusty-300 mt-4"},"Loading circle details...",-1)])])):(n(),l("div",fe,[e("div",ge,[e("div",null,[e("h1",he,o(i.value.name),1),e("p",we,o(i.value.description),1)]),e("span",{class:f(`badge-${i.value.status==="active"?"success":"warning"}`)},o(i.value.status),3)]),e("div",ke,[e("div",Pe,[t[11]||(t[11]=e("div",{class:"text-dusty-400 text-sm mb-1"},"Monthly Amount",-1)),e("div",Ce," $"+o(i.value.monthly_amount),1)]),e("div",Me,[t[12]||(t[12]=e("div",{class:"text-dusty-400 text-sm mb-1"},"Members",-1)),e("div",De,o(i.value.current_members)+"/"+o(i.value.max_members),1)]),e("div",$e,[t[13]||(t[13]=e("div",{class:"text-dusty-400 text-sm mb-1"},"Current Cycle",-1)),e("div",Re,o(i.value.current_cycle),1)]),e("div",je,[t[14]||(t[14]=e("div",{class:"text-dusty-400 text-sm mb-1"},"Next Payout",-1)),e("div",Ee,o(H(i.value.next_payout_date)),1)])]),e("div",Ie,[e("div",Se,[e("div",null,[t[15]||(t[15]=e("h3",{class:"font-semibold text-starlight-400 mb-1"},"Invite Code",-1)),e("p",Ve,o(i.value.invite_code),1)]),e("button",{class:"btn-starlight",onClick:ee}," Copy Code ")])]),e("div",Ae,[e("div",Ne,[e("div",null,[e("h3",Ue," Monthly Payment - Cycle "+o(i.value.current_cycle),1),e("p",Be," $"+o(i.value.monthly_amount),1),t[16]||(t[16]=e("p",{class:"text-sm text-dusty-400 mt-1"},"Due this month",-1))]),T.value?(n(),l("div",Fe,[...t[17]||(t[17]=[e("span",{class:"inline-flex items-center px-6 py-3 rounded-lg bg-green-500/20 text-green-400 border border-green-500"},[e("span",{class:"text-2xl mr-2"},"âœ“"),e("span",{class:"font-semibold"},"Paid")],-1)])])):(n(),l("button",{key:1,onClick:t[0]||(t[0]=s=>F.value=!0),class:"btn-frontier"}," Pay Now "))])]),e("div",Te,[e("h3",Le," ðŸ’° Current Pool Progress - Cycle "+o(i.value.current_cycle),1),e("div",Ye,[e("div",ze,[t[18]||(t[18]=e("span",{class:"text-dusty-300"},"Pooled Funds",-1)),e("span",He," $"+o(c.value.current_pool_amount||0)+" / $"+o(c.value.expected_pool_amount||0),1)]),e("div",We,[e("div",{class:"bg-gradient-to-r from-green-500 to-green-400 h-4 rounded-full transition-all duration-500",style:_e({width:`${c.value.pool_progress||0}%`})},null,4)]),e("div",qe,[e("span",null,o(c.value.members_paid||0)+" / "+o(c.value.total_active_members||0)+" members paid",1),e("span",null,o(Math.round(c.value.pool_progress||0))+"%",1)]),e("div",Ge,[e("div",Je,[e("span",Ke,[e("span",Oe,o(c.value.members_paid||0),1),t[19]||(t[19]=N(" paid â€¢ ",-1)),e("span",Qe,o((c.value.total_active_members||0)-(c.value.members_paid||0)),1),t[20]||(t[20]=N(" remaining ",-1))]),e("span",Xe," Need $"+o(((c.value.total_active_members||0)-(c.value.members_paid||0))*(i.value.monthly_amount||0))+" more ",1)])]),e("div",Ze,[t[21]||(t[21]=e("h4",{class:"text-sm font-semibold text-dusty-300 mb-3"}," Member Payment Status ",-1)),e("div",et,[(n(!0),l(k,null,P(R.value,s=>(n(),l("div",{key:s.id,class:f(["flex items-center justify-between p-2 rounded",M(s).paid?"bg-green-500/10 border border-green-500/30":"bg-dusty-700"])},[e("div",tt,[e("div",{class:f(["w-6 h-6 rounded-full flex items-center justify-center text-xs",M(s).paid?"bg-green-500 text-white":"bg-dusty-600 text-dusty-300"])},o(M(s).paid?"âœ“":"â³"),3),e("span",{class:f(["text-sm",M(s).paid?"text-green-400":"text-dusty-300"])},o(s.name),3)]),e("div",{class:f(["text-xs",M(s).paid?"text-green-400":"text-dusty-400"])},o(M(s).paid?"Paid":"Pending"),3)],2))),128))])])]),c.value.next_recipient_name?(n(),l("div",st,[e("div",null,[t[22]||(t[22]=e("p",{class:"text-xs text-dusty-400"},"Next Payout Recipient",-1)),e("p",ot,o(c.value.next_recipient_name),1),e("p",at," Cycle "+o(i.value.current_cycle),1)]),c.value.is_ready_for_payout?(n(),l("div",rt,[...t[23]||(t[23]=[e("span",{class:"inline-flex items-center px-4 py-2 rounded-lg bg-green-500/20 text-green-400 border border-green-500 text-sm"},[e("span",{class:"text-xl mr-2"},"âœ“"),e("span",{class:"font-semibold"},"Ready for Payout")],-1)])])):y("",!0)])):y("",!0)]),Y.value.length>0?(n(),l("div",lt,[t[25]||(t[25]=e("h3",{class:"font-semibold text-blue-400 mb-4"},"ðŸŽ‰ Recent Payouts",-1)),e("div",nt,[(n(!0),l(k,null,P(Y.value,s=>(n(),l("div",{key:s.id,class:"flex items-center justify-between p-4 bg-dusty-800 rounded-lg border border-blue-500/30"},[e("div",it,[t[24]||(t[24]=e("div",{class:"w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center"},[e("span",{class:"text-white text-lg"},"ðŸ’°")],-1)),e("div",null,[e("p",dt,o(s.title),1),e("p",ct,o(s.message),1),e("p",ut,o(H(s.created_at))+" â€¢ "+o(s.payout_type==="automatic"?"Auto-payout":"Manual payout"),1)])]),e("div",pt,[e("p",mt," $"+o(s.amount),1),e("p",yt," Cycle "+o(s.cycle_number),1)])]))),128))])])):y("",!0),F.value?(n(),l("div",vt,[e("div",_t,[t[33]||(t[33]=e("h2",{class:"text-2xl font-bold text-frontier-400 mb-4"}," Make Payment ",-1)),t[34]||(t[34]=e("p",{class:"text-dusty-300 mb-6"},"Choose your payment method",-1)),e("div",xt,[e("p",bt,[t[26]||(t[26]=N(" Amount Due: ",-1)),e("span",ft,"$"+o(i.value.monthly_amount),1)]),t[27]||(t[27]=e("label",{class:"block text-sm font-medium mb-3"},"Payment Method",-1)),e("div",gt,[(n(),l(k,null,P(Q,s=>e("label",{key:s.value,class:f(["flex items-center p-4 border-2 rounded-lg cursor-pointer transition-all",_.value===s.value?"border-frontier-500 bg-frontier-500/10":"border-dusty-600 hover:border-dusty-500"])},[E(e("input",{type:"radio",value:s.value,"onUpdate:modelValue":t[1]||(t[1]=r=>_.value=r),class:"mr-3"},null,8,ht),[[xe,_.value]]),e("div",wt,[e("span",kt,o(s.icon),1),e("div",null,[e("p",Pt,o(s.label),1),e("p",Ct,o(s.description),1)])])],2)),64))])]),_.value==="credit_card"||_.value==="debit_card"?(n(),l("div",Mt,[t[32]||(t[32]=e("h3",{class:"text-lg font-semibold text-frontier-400 mb-4"}," Card Details ",-1)),e("div",Dt,[e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium mb-2"},"Card Number",-1)),E(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>d.value.number=s),onInput:oe,type:"text",placeholder:"1234 5678 9012 3456",maxlength:"19",class:"w-full px-4 py-2 bg-dusty-800 border border-dusty-600 rounded-lg focus:border-frontier-500 focus:ring-1 focus:ring-frontier-500 outline-none"},null,544),[[U,d.value.number]])]),e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium mb-2"},"Cardholder Name",-1)),E(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>d.value.name=s),type:"text",placeholder:"John Doe",class:"w-full px-4 py-2 bg-dusty-800 border border-dusty-600 rounded-lg focus:border-frontier-500 focus:ring-1 focus:ring-frontier-500 outline-none"},null,512),[[U,d.value.name]])]),e("div",$t,[e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium mb-2"},"Expiry Date",-1)),E(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>d.value.expiry=s),onInput:ae,type:"text",placeholder:"MM/YY",maxlength:"5",class:"w-full px-4 py-2 bg-dusty-800 border border-dusty-600 rounded-lg focus:border-frontier-500 focus:ring-1 focus:ring-frontier-500 outline-none"},null,544),[[U,d.value.expiry]])]),e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium mb-2"},"CVV",-1)),E(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>d.value.cvv=s),onInput:re,type:"text",placeholder:"123",maxlength:"4",class:"w-full px-4 py-2 bg-dusty-800 border border-dusty-600 rounded-lg focus:border-frontier-500 focus:ring-1 focus:ring-frontier-500 outline-none"},null,544),[[U,d.value.cvv]])])])])])):y("",!0),e("div",Rt,[e("button",{type:"button",onClick:q,class:"btn-frontier-outline flex-1",disabled:w.value}," Cancel ",8,jt),e("button",{onClick:ne,class:"btn-frontier flex-1",disabled:w.value||!_.value},[w.value?(n(),l("span",It)):y("",!0),N(" "+o(w.value?"Processing...":"Confirm Payment"),1)],8,Et)])])])):y("",!0),e("div",St,[e("div",Vt,[e("button",{class:f([x.value==="members"?"border-frontier-500 text-frontier-400":"border-transparent text-dusty-400","pb-3 border-b-2 font-medium transition-colors"]),onClick:t[6]||(t[6]=s=>x.value="members")}," Members ",2),e("button",{class:f([x.value==="schedule"?"border-frontier-500 text-frontier-400":"border-transparent text-dusty-400","pb-3 border-b-2 font-medium transition-colors"]),onClick:t[7]||(t[7]=s=>x.value="schedule")}," Payout Schedule ",2),e("button",{class:f([x.value==="payments"?"border-frontier-500 text-frontier-400":"border-transparent text-dusty-400","pb-3 border-b-2 font-medium transition-colors"]),onClick:t[8]||(t[8]=s=>x.value="payments")}," Payments ",2),e("button",{class:f([x.value==="payouts"?"border-frontier-500 text-frontier-400":"border-transparent text-dusty-400","pb-3 border-b-2 font-medium transition-colors"]),onClick:t[9]||(t[9]=s=>x.value="payouts")}," Payout History ",2)])]),x.value==="members"?(n(),l("div",At,[t[35]||(t[35]=e("h3",{class:"text-xl font-semibold mb-4 text-frontier-400"}," Circle Members ",-1)),e("div",Nt,[(n(!0),l(k,null,P(R.value,s=>(n(),l("div",{key:s.id,class:"flex items-center justify-between p-3 bg-dusty-700 rounded-lg"},[e("div",Ut,[e("div",Bt,o(s.name.charAt(0)),1),e("div",null,[e("p",Ft,o(s.name),1),e("p",Tt," Credit Score: "+o(s.credit_score),1)])]),e("div",Lt,[e("span",{class:f(`badge-${s.status==="active"?"success":"warning"}`)},o(s.status),3),s.status==="pending"&&s.user_id!==C.value&&!j.value.has(s.user_id)?(n(),l("button",{key:0,onClick:r=>te(s),class:"btn-frontier text-sm",disabled:I.value},o(I.value?"Vouching...":"Vouch"),9,Yt)):y("",!0),s.status==="pending"&&j.value.has(s.user_id)?(n(),l("span",zt," âœ“ Vouched ")):y("",!0),s.status==="pending"&&$.value?(n(),l("button",{key:2,onClick:r=>se(s),class:"btn-starlight text-sm ml-2",disabled:S.value},o(S.value?"Approving...":"Approve"),9,Ht)):y("",!0)])]))),128))])])):y("",!0),x.value==="schedule"?(n(),l("div",Wt,[t[36]||(t[36]=e("h3",{class:"text-xl font-semibold mb-4 text-frontier-400"}," Payout Schedule ",-1)),e("div",qt,[(n(!0),l(k,null,P(L.value,(s,r)=>(n(),l("div",{key:r,class:"flex items-center justify-between p-3 bg-dusty-700 rounded-lg"},[e("div",Gt,[e("span",Jt,o(s.has_received_payout?"âœ…":s.position_in_cycle===i.value.current_cycle?"âž¡ï¸":"â³"),1),e("div",null,[e("p",Kt,o(s.user_name),1),e("p",Ot," Position "+o(s.position_in_cycle),1)])]),e("div",Qt,[e("p",Xt," $"+o(s.monthly_amount*i.value.current_members),1),e("p",Zt,o(s.has_received_payout?"Received":"Pending"),1)])]))),128))])])):y("",!0),x.value==="payments"?(n(),l("div",es,[t[37]||(t[37]=e("h3",{class:"text-xl font-semibold mb-4 text-frontier-400"}," Payment History ",-1)),A.value.length===0?(n(),l("div",ts," No payments recorded yet. Be the first to contribute! ")):(n(),l("div",ss,[(n(!0),l(k,null,P(A.value,s=>(n(),l("div",{key:s.id,class:"flex items-center justify-between p-4 bg-dusty-700 rounded-lg"},[e("div",os,[e("div",as,[e("span",rs,o(X(s.payment_method)),1)]),e("div",null,[e("p",ls,o(s.user_name),1),e("p",ns," Cycle "+o(s.cycle_number)+" â€¢ "+o(W(s.created_at)),1),e("p",is,o(Z(s.payment_method)),1)])]),e("div",ds,[e("p",cs," $"+o(s.amount),1),e("span",us,o(s.status),1)])]))),128))]))])):y("",!0),x.value==="payouts"?(n(),l("div",ps,[e("div",ms,[t[38]||(t[38]=e("h3",{class:"text-xl font-semibold text-frontier-400"}," Payout History ",-1)),z.value?(n(),l("button",{key:0,onClick:ce,disabled:V.value||!c.value.next_recipient_id,class:"px-4 py-2 bg-green-600 hover:bg-green-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white rounded-lg font-medium transition-colors flex items-center space-x-2"},[V.value?(n(),l("span",vs,"Processing...")):c.value.next_recipient_id?c.value.is_ready_for_payout?(n(),l("span",bs,"ðŸŽ¯ Release Payout (Demo)")):(n(),l("span",xs,"ðŸŽ¯ Release Payout (Pool Not Full)")):(n(),l("span",_s,"ðŸŽ¯ Release Payout (No Recipient)"))],8,ys)):y("",!0),z.value?y("",!0):(n(),l("div",fs," Debug: Admin: "+o($.value)+", User ID: "+o(C.value)+", Circle Admin: "+o(i.value.admin_id),1))]),h.value.length>0?(n(),l("div",gs,[e("div",hs,[e("div",ws,[e("p",ks,o(h.value.length),1),t[39]||(t[39]=e("p",{class:"text-sm text-dusty-400"},"Total Payouts",-1))]),e("div",Ps,[e("p",Cs," $"+o(h.value.reduce((s,r)=>s+parseFloat(r.amount),0)),1),t[40]||(t[40]=e("p",{class:"text-sm text-dusty-400"},"Total Distributed",-1))]),e("div",Ms,[e("p",Ds,o(h.value.filter(s=>s.payout_type==="automatic").length),1),t[41]||(t[41]=e("p",{class:"text-sm text-dusty-400"},"Auto Payouts",-1))])])])):y("",!0),h.value.length===0?(n(),l("div",$s," No payouts have been distributed yet. ")):(n(),l("div",Rs,[(n(!0),l(k,null,P(h.value,s=>(n(),l("div",{key:s.id,class:"p-4 bg-green-900/20 border border-green-700 rounded-lg"},[e("div",js,[e("div",Es,[t[42]||(t[42]=e("div",{class:"w-12 h-12 bg-green-500 rounded-full flex items-center justify-center"},[e("span",{class:"text-2xl"},"ðŸ’°")],-1)),e("div",null,[e("p",Is,o(s.recipient_name),1),e("p",Ss," Received payout for Cycle "+o(s.cycle_number),1)])]),e("div",Vs,[e("p",As," $"+o(s.amount),1),e("div",Ns,[e("span",Us,o(s.status),1),e("span",{class:f(["text-xs px-2 py-1 rounded",s.payout_type==="automatic"?"bg-blue-500/20 text-blue-400 border border-blue-500":"bg-yellow-500/20 text-yellow-400 border border-yellow-500"])},o(s.payout_type==="automatic"?"Auto":"Manual"),3)])])]),e("div",Bs,[e("div",Fs,[e("span",Ts,[t[43]||(t[43]=e("span",null,"ðŸ“…",-1)),e("span",null,o(W(s.created_at)),1)]),e("span",Ls,[t[44]||(t[44]=e("span",null,"ðŸ†”",-1)),e("span",Ys,o(s.id.slice(0,8))+"...",1)])]),e("div",zs,o(s.payout_type==="automatic"?"Automatically processed":"Manually processed"),1)])]))),128))]))])):y("",!0)]))]))}};export{Gs as default};
