import{u as h,r as c,e as k,c as i,a as e,f as y,w,i as j,v as M,j as $,t as l,F as J,h as U,k as b,o as r,n as D}from"./index-wgzJFDBO.js";const E={class:"flex justify-between items-center mb-8"},N={class:"flex space-x-3"},S={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},B={class:"bg-dusty-800 rounded-lg p-6 max-w-md w-full mx-4"},F={class:"mb-6"},V=["disabled"],I={class:"flex space-x-3"},P=["disabled"],R=["disabled"],z={key:0,class:"spinner inline-block mr-2"},L={key:1,class:"text-center py-12"},T={key:2,class:"card text-center py-12"},Y={key:3,class:"grid md:grid-cols-2 gap-6"},q=["onClick"],A={class:"flex justify-between items-start mb-4"},G={class:"text-xl font-semibold text-frontier-400"},H={class:"text-sm text-dusty-400"},K={class:"grid grid-cols-2 gap-4 mt-4 pt-4 border-t border-dusty-700"},O={class:"text-lg font-semibold text-frontier-400"},Q={class:"text-lg font-semibold text-starlight-400"},W={class:"mt-4 pt-4 border-t border-dusty-700"},X={class:"text-dusty-100"},se={__name:"Circles",setup(Z){const{user:ee}=h(),u=c(!1),v=c([]),m=c(!1),a=c(""),n=c(!1),x=o=>({active:"badge-success",pending:"badge-warning",completed:"badge-info"})[o]||"badge",g=o=>new Date(o).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),p=async()=>{u.value=!0;try{const t=(await b.auth.getCurrentUser()).data.data.id,s=await b.users.getCircles(t);v.value=s.data.data}catch(o){console.error("Error loading circles:",o)}finally{u.value=!1}},_=async()=>{var o,t,s;if(!a.value.trim()){alert("Please enter an invite code");return}n.value=!0;try{const d=await b.circles.joinByInviteCode(a.value.trim());alert(d.data.message||"Successfully joined the circle!"),f(),await p()}catch(d){console.error("Error joining circle:",d);const C=((s=(t=(o=d.response)==null?void 0:o.data)==null?void 0:t.error)==null?void 0:s.message)||"Failed to join circle. Please check the invite code and try again.";alert(C)}finally{n.value=!1}},f=()=>{m.value=!1,a.value="",n.value=!1};return k(async()=>{await p()}),(o,t)=>(r(),i("div",null,[e("div",E,[t[4]||(t[4]=e("div",null,[e("h1",{class:"text-3xl font-bold text-frontier-400 mb-2"},"My Circles"),e("p",{class:"text-dusty-300"},"Manage your lending circles")],-1)),e("div",N,[e("button",{onClick:t[0]||(t[0]=s=>m.value=!0),class:"btn-frontier-outline"}," Join Circle "),e("button",{onClick:t[1]||(t[1]=s=>o.$router.push("/circles/create")),class:"btn-frontier"}," + Create New Circle ")])]),m.value?(r(),i("div",S,[e("div",B,[t[6]||(t[6]=e("h2",{class:"text-2xl font-bold text-frontier-400 mb-4"},"Join a Circle",-1)),t[7]||(t[7]=e("p",{class:"text-dusty-300 mb-6"},"Enter the invite code provided by the circle admin",-1)),e("form",{onSubmit:w(_,["prevent"])},[e("div",F,[t[5]||(t[5]=e("label",{class:"block text-sm font-medium mb-2"},"Invite Code",-1)),j(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>a.value=s),type:"text",required:"",placeholder:"Enter invite code",class:"input-field uppercase",disabled:n.value},null,8,V),[[M,a.value]])]),e("div",I,[e("button",{type:"button",onClick:f,class:"btn-frontier-outline flex-1",disabled:n.value}," Cancel ",8,P),e("button",{type:"submit",class:"btn-frontier flex-1",disabled:n.value},[n.value?(r(),i("span",z)):y("",!0),$(" "+l(n.value?"Joining...":"Join Circle"),1)],8,R)])],32)])])):y("",!0),u.value?(r(),i("div",L,[...t[8]||(t[8]=[e("div",{class:"spinner mx-auto"},null,-1)])])):v.value.length===0?(r(),i("div",T,[t[9]||(t[9]=e("p",{class:"text-dusty-300 mb-4"},"You're not part of any circles yet",-1)),e("button",{onClick:t[3]||(t[3]=s=>o.$router.push("/circles/create")),class:"btn-frontier"}," Create Your First Circle ")])):(r(),i("div",Y,[(r(!0),i(J,null,U(v.value,s=>(r(),i("div",{key:s.id,class:"card-hover cursor-pointer",onClick:d=>o.$router.push(`/circles/${s.id}`)},[e("div",A,[e("div",null,[e("h3",G,l(s.name),1),e("p",H,l(s.description),1)]),e("span",{class:D(x(s.status))},l(s.status),3)]),e("div",K,[e("div",null,[t[10]||(t[10]=e("div",{class:"text-dusty-400 text-sm"},"Monthly Amount",-1)),e("div",O,"$"+l(s.monthly_amount),1)]),e("div",null,[t[11]||(t[11]=e("div",{class:"text-dusty-400 text-sm"},"Members",-1)),e("div",Q,l(s.current_members)+"/"+l(s.max_members),1)])]),e("div",W,[t[12]||(t[12]=e("div",{class:"text-dusty-400 text-sm mb-1"},"Next Payout",-1)),e("div",X,l(g(s.next_payout_date)),1)])],8,q))),128))]))]))}};export{se as default};
